<!DOCTYPE html>
<html >
  <head>
    <meta charset="UTF-8">
    <title>Historical Timeline V0.0.06</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
  </head>

  <body>

    <div id = "Top">

      <select id="dropdownOne" class = "dropdown" form = "timelineSelector">
      </select>
      <select id="dropdownTwo" class = "dropdown" form = "timelineSelector">
        <option value="None">None</option>
      </select>
      <select id="dropdownThree" class = "dropdown" form = "timelineSelector">
        <option value="None">None</option>
      </select>
     <button type = "button" id = "submit" onclick = "changePage()"> Submit </button>
            <button type = "button" id = "reset" onclick = "reset()"> Reset </button>
    </div>
    <div id = "timeline">

    </div>
    <div id = "footer">
      <a href = "http://webkinz.com">About us and that Bs will go down here</a>
    </div>

    <!--- Setting Up Dropdowns -->

    <script type="text/javascript">

    var xhreq = new XMLHttpRequest();
    var url = "/timeline";

    xhreq.open("GET", url, true);
    xhreq.send(); 

    xhreq.onreadystatechange = function() {
        if (xhreq.readyState == 4 && xhreq.status == 200) {
            var myArr = JSON.parse(xhreq.responseText);
            makeDropdown(myArr);
        }
    };

    function makeDropdown(arr) {

      var i;
      var out = '';
      
      for(i = 0; i < arr.length; i++) {
            out += ' <option value = "' + arr[i].timelineName + '">' + arr[i].timelineName + '</option>';
        }

        document.getElementById("dropdownOne").innerHTML = out;
    }

    </script>

    <!--- Sourcing Text for Timeline  -->
    <script type="text/javascript">

    var xhr = new XMLHttpRequest();
    var url = "timeline/Ben's Timeline";

    xhr.open("GET", url, true);
    xhr.send(); 


    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && xhr.status == 200) {
            var myArr = JSON.parse(xhr.responseText);

            makeTimeline(myArr);
        }
    };


    function makeTimeline(arr) {

        var i;
        var out = '<div class= "event offset-first"> <h1> ' + arr[0].year + '</h1><img src = "' + arr[0].img + '""></img><div class = "Text">' + arr[0].description + '</div>  <a href = "' + arr[0].url + '">More Info </a> </div>' ;  
       for(i = 1; i < arr.length; i++) {
            out += ' <div class= "event"> <h1> ' + arr[i].year + '</h1><img src = "' + arr[i].img + '""></img><div class = "Text">' + arr[i].description + '</div>  <a href = "' + arr[i].url + '">More Info </a> </div>';
        }
        document.getElementById("timeline").innerHTML = out;
    }
  </script>

  <!--- Changing Webpage -->
  <script>
      function changePage(){
        var url = "";

        var one = document.getElementById("dropdownOne");
        one = one.options[one.selectedIndex].value;
        var two = document.getElementById("dropdownTwo");
        two = two.options[two.selectedIndex].value;
        var three = document.getElementById("dropdownTwo");
        three = three.options[three.selectedIndex].value;
        
        if(one != "None")
          url += one;
        if(two != "None")
          url += two;
        if(three != "None")
          url += three;

        location.href = url + ".html";
      }

      function reset(){
        location.href = "/";
      }
    </script>


  </body>
</html>